<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>OpenAPI Support in ASP.NET Core 9 and Using Swagger UI for API Documentation - Saheb Ansari | Software Engineer</title><meta name="description" content="Introduction Hey there, fellow developers! If you're diving into the world of web development, you know how important it is&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><script type="text/javascript" async src="https://www.googletagmanager.com/gtag/js?id=G-Y4BK0MNFF1"></script><script type="text/javascript">window.dataLayer = window.dataLayer || [];
				  function gtag(){dataLayer.push(arguments);}
				  gtag('js', new Date());
				  gtag('config', 'G-Y4BK0MNFF1' );</script><link rel="stylesheet" href="https://www.sahebansari.com/media/plugins/syntaxHighlighter/prism-violet.css"><link rel="canonical" href="https://www.sahebansari.com/openapi-support-in-aspnet-core-9-and-using-swagger-ui-for-api-documentation.html"><link rel="alternate" type="application/atom+xml" href="https://www.sahebansari.com/feed.xml"><link rel="alternate" type="application/json" href="https://www.sahebansari.com/feed.json"><meta property="og:title" content="OpenAPI Support in ASP.NET Core 9 and Using Swagger UI for API Documentation"><meta property="og:image" content="https://www.sahebansari.com/media/posts/14/documentation-2.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="468"><meta property="og:site_name" content="Saheb Ansari | Software Engineer"><meta property="og:description" content="Introduction Hey there, fellow developers! If you're diving into the world of web development, you know how important it is&hellip;"><meta property="og:url" content="https://www.sahebansari.com/openapi-support-in-aspnet-core-9-and-using-swagger-ui-for-api-documentation.html"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@sahebansari"><meta name="twitter:title" content="OpenAPI Support in ASP.NET Core 9 and Using Swagger UI for API Documentation"><meta name="twitter:description" content="Introduction Hey there, fellow developers! If you're diving into the world of web development, you know how important it is&hellip;"><meta name="twitter:image" content="https://www.sahebansari.com/media/posts/14/documentation-2.png"><link rel="shortcut icon" href="https://www.sahebansari.com/media/website/favicon.ico" type="image/x-icon"><link rel="preload" href="https://www.sahebansari.com/assets/dynamic/fonts/lora/lora.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://www.sahebansari.com/assets/dynamic/fonts/lora/lora-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://www.sahebansari.com/assets/css/style.css?v=ab51081d6de47c3244c270e4d0f7e94d"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sahebansari.com/openapi-support-in-aspnet-core-9-and-using-swagger-ui-for-api-documentation.html"},"headline":"OpenAPI Support in ASP.NET Core 9 and Using Swagger UI for API Documentation","datePublished":"2024-12-21T19:33+05:30","dateModified":"2024-12-21T23:20+05:30","image":{"@type":"ImageObject","url":"https://www.sahebansari.com/media/posts/14/documentation-2.png","height":468,"width":1200},"description":"Introduction Hey there, fellow developers! If you're diving into the world of web development, you know how important it is&hellip;","author":{"@type":"Person","name":"Saheb Ansari","url":"https://www.sahebansari.com/authors/saheb-ansari/"},"publisher":{"@type":"Organization","name":"Saheb Ansari","logo":{"@type":"ImageObject","url":"https://www.sahebansari.com/media/website/logo-transparent-svg-2.svg","height":19,"width":19}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><link rel="stylesheet" href="https://www.sahebansari.com/media/plugins/docSearch/docsearch.min.css"></head><body class="post-template"><header class="header" id="js-header"><a href="https://www.sahebansari.com/" class="logo"><img src="https://www.sahebansari.com/media/website/logo-transparent-svg-2.svg" alt="Saheb Ansari | Software Engineer" width="19" height="19"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://www.sahebansari.com/" title="Go back to home page" target="_self">Home</a></li><li><a href="https://www.sahebansari.com/tags/posts/" title="Latest Posts" target="_self">Posts</a></li><li><a href="https://www.sahebansari.com/contact.html" title="Go to contact page" target="_self">Contact Us</a></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><div id="docsearch"></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false" height="18" width="18"><use xlink:href="https://www.sahebansari.com/assets/svg/svg-map.svg#search"/></svg></button></div></header><main class="post"><div class="wrapper"><article class="content"><header class="content__header"><a href="https://www.sahebansari.com/tags/aspnet/" class="content__maintag">ASP.NET</a><h1 class="content__title">OpenAPI Support in ASP.NET Core 9 and Using Swagger UI for API Documentation</h1><div class="content__meta"><div class="content__author">By <a href="https://www.sahebansari.com/authors/saheb-ansari/" class="invert" rel="author" title="Saheb Ansari">Saheb Ansari</a></div><time datetime="2024-12-21T19:33">December 21, 2024</time></div></header><figure class="content__featured-image"><img src="https://www.sahebansari.com/media/posts/14/documentation-2.png" srcset="https://www.sahebansari.com/media/posts/14/responsive/documentation-2-xs.png 300w, https://www.sahebansari.com/media/posts/14/responsive/documentation-2-sm.png 480w, https://www.sahebansari.com/media/posts/14/responsive/documentation-2-md.png 768w, https://www.sahebansari.com/media/posts/14/responsive/documentation-2-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="eager" height="468" width="1200" alt=""><figcaption>Image Credit: unsplash.com</figcaption></figure><div class="content__inner"><div class="content__entry"><h2>Introduction</h2><p>Hey there, fellow developers! If you're diving into the world of web development, you know how important it is to have well-documented APIs. ASP.NET Core 9 has got your back with enhanced support for OpenAPI, making it super easy to document your Web APIs. In this post, we'll walk you through how to leverage OpenAPI in ASP.NET Core 9 and use Swagger UI to create awesome API documentation.</p><h2>What is OpenAPI?</h2><p>First things first, let's talk about OpenAPI. Formerly known as Swagger, OpenAPI is a specification for building APIs. It helps you define your APIs in a standardized format, making them easier to understand, test, and integrate with other systems. Think of it as a blueprint for your API, detailing its structure, endpoints, request/response formats, and authentication methods.</p><h2>Setting Up ASP.NET Core 9</h2><p>Ready to get started? Make sure you have the latest version of the .NET SDK installed. You can create a new ASP.NET Core 9 project with this command:</p><pre class="language-bash line-numbers"><code>dotnet new webapi -minimal -n MyApiProject cd MyApiProject</code></pre><h2>Adding OpenAPI Support</h2><p>ASP.NET Core 9 comes with built-in support for OpenAPI. To enable it, you'll need to add the <code>Microsoft.AspNetCore.OpenApi</code> package to your project. Just run:</p><pre class="language-bash line-numbers"><code>dotnet add package Microsoft.AspNetCore.OpenApi</code></pre><p>Next, open the <code>Program.cs</code> file and configure OpenAPI in the <code>ConfigureServices</code> and <code>Configure</code> methods:</p><pre class="language-csharp line-numbers"><code>var builder = WebApplication.CreateBuilder(args);


// builder.Services.AddEndpointsApiExplorer();
// builder.Services.AddSwaggerGen();
// The above two lines are not needed with ASP.Net Core 9 

// Learn more about configuring OpenAPI at https://aka.ms/aspnet/openapi
builder.Services.AddOpenApi();

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    // app.UseSwagger(); This is also not needed now. Instead use function MapOpenApi()
    app.MapOpenApi("OpenApi/v1/OpenApiDoc.json");
    app.UseSwaggerUI(c =&gt;
    {
     c.SwaggerEndpoint("/OpenApi/v1/OpenApiDoc.json", "My API Documentation V1");
    }
  
}

app.UseHttpsRedirection();

var apiGroup = app.MapGroup("/api");

apiGroup.MapGet("/greet", () =&gt; "Hello, World!")
    .WithName("Greet")
    .WithDescription("Returns a greeting message.");

app.Run();
</code></pre><h2>Using Swagger UI</h2><p>Swagger UI is a fantastic tool that automatically generates interactive API documentation from your OpenAPI specification. With Swagger UI, you can visualize and test your API endpoints right from your browser.</p><p>To check it out, run your application and navigate to <code>http://localhost:5000</code> (or the appropriate URL for your setup). You'll see a user-friendly interface displaying your API endpoints, request/response formats, and other details.</p><h2>Customizing Swagger UI</h2><p>Want to make Swagger UI your own? You can customize its appearance and behavior by tweaking the <code>SwaggerUIOptions</code> in the <code>Configure</code> method. For example, you can change the theme, add custom CSS, or enable deep linking:</p><pre class="language-csharp line-numbers"><code>app.UseSwaggerUI(c =&gt;
{
    c.SwaggerEndpoint("/OpenApi/v1/OpenApiDoc.json", "My API Documentation V1");
    c.RoutePrefix = "OpenApiDoc";
    c.DocumentTitle = "My Custom API Documentation";
    c.InjectStylesheet("/swagger-ui/custom.css");
    c.EnableDeepLinking();
});
</code></pre><h3>What is <code>EnableDeepLinking()</code>?</h3><p>The <code>EnableDeepLinking()</code> function in Swagger UI is a nifty feature that allows you to enable deep linking for tags and operations. This means each tag and operation in your API documentation will have a unique URL that can be bookmarked and shared. When you navigate to a specific tag or operation using its URL, Swagger UI will automatically expand and highlight the corresponding section. This is super handy for large APIs, as it lets users quickly access and share specific parts of the documentation.</p><h2>Providing Descriptions for Endpoints</h2><p>In Minimal APIs, you can provide descriptions for your endpoints using the <code>WithDescription</code> method. This method lets you add a brief description of what the endpoint does, which will be displayed in the Swagger UI. For example:</p><pre class="language-csharp line-numbers"><code>apiGroup.MapGet("/greet", () =&gt; "Hello, World!")
    .WithName("Greet")
    .WithDescription("Returns a greeting message.");
</code></pre><p>These descriptions help users understand the purpose of each endpoint and how to use them effectively.</p><h2>Launch Settings for Swagger UI</h2><p>To automatically open Swagger UI when you run your project, you can configure the launch settings in the <code>launchSettings.json</code> file. Here's how you can do it:</p><ol start="1"><li><p>Open the <code>Properties</code> folder in your project.</p></li><li><p>Open the <code>launchSettings.json</code> file.</p></li><li><p>Add the following configuration under the <code>profiles</code> section:</p></li></ol><pre class="language-json line-numbers"><code>{
  "profiles": {
    "MyApiProject": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "launchUrl": "OpenApiDoc",
      "applicationUrl": "https://localhost:5001;http://localhost:5000",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}
</code></pre><h2>Conclusion</h2><p>OpenAPI support in ASP.NET Core 9, combined with Swagger UI, provides a powerful and user-friendly way to document your Web APIs. By following the steps outlined in this blog post, you can create comprehensive and interactive API documentation that will benefit both developers and users.</p><p>Happy coding!😊</p></div><footer><p class="content__last-updated">This article was updated on December 21, 2024</p><div class="content__tags-share"><ul class="content__tag"><li><a href="https://www.sahebansari.com/tags/aspnet/">ASP.NET</a></li><li><a href="https://www.sahebansari.com/tags/c/">C#</a></li><li><a href="https://www.sahebansari.com/tags/openapi/">OpenAPI</a></li><li><a href="https://www.sahebansari.com/tags/posts/">Posts</a></li><li><a href="https://www.sahebansari.com/tags/swaggerui/">SwaggerUI</a></li></ul><aside class="content__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.sahebansari.com%2Fopenapi-support-in-aspnet-core-9-and-using-swagger-ui-for-api-documentation.html" class="js-share facebook" aria-label="Share with Facebook" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://www.sahebansari.com/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fwww.sahebansari.com%2Fopenapi-support-in-aspnet-core-9-and-using-swagger-ui-for-api-documentation.html&amp;via=%40sahebansari&amp;text=OpenAPI%20Support%20in%20ASP.NET%20Core%209%20and%20Using%20Swagger%20UI%20for%20API%20Documentation" class="js-share twitter" aria-label="Share with Twitter" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://www.sahebansari.com/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.sahebansari.com%2Fopenapi-support-in-aspnet-core-9-and-using-swagger-ui-for-api-documentation.html" class="js-share linkedin" aria-label="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://www.sahebansari.com/assets/svg/svg-map.svg#linkedin"/></svg> </a><a href="https://api.whatsapp.com/send?text=OpenAPI%20Support%20in%20ASP.NET%20Core%209%20and%20Using%20Swagger%20UI%20for%20API%20Documentation https%3A%2F%2Fwww.sahebansari.com%2Fopenapi-support-in-aspnet-core-9-and-using-swagger-ui-for-api-documentation.html" class="js-share whatsapp" aria-label="Share with WhatsApp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.sahebansari.com/assets/svg/svg-map.svg#whatsapp"/></svg></a></aside></div><div class="content__bio bio"><img src="https://www.sahebansari.com/media/website/profile2.png" loading="lazy" height="150" width="150" class="bio__avatar" alt="Saheb Ansari"><div><h3 class="h6 bio__name"><a href="https://www.sahebansari.com/authors/saheb-ansari/" class="invert" title="Saheb Ansari">Saheb Ansari</a></h3><div class="bio__desc"><p>A hardcore software developer who writes computer program under the moonlight and the sunlight. Who passionate about AI and machine learning, share insights through engaging, humorous blogs. Known for sharp intellect and witty banter. Outside of coding, enjoy exploring new gadgets and sci-fi novels.</p><div class="footer__social">Follow me on: <a style="text-decoration: none;" href="https://www.facebook.com/sahebansari" aria-label="Facebook" target="_blank" rel="noopener">Facebook</a> | <a style="text-decoration: none;" href="https://www.x.com/sahebansari" aria-label="X" target="_blank" rel="noopener">X.com(twitter)</a> | <a style="text-decoration: none;" href="https://www.youtube.com/@sahebansari" aria-label="Youtube" target="_blank" rel="noopener">YouTube</a> | <a style="text-decoration: none;" href="https://www.linkedin.com/in/sahebansari/" aria-label="LinkedIn" target="_blank" rel="noopener">LinkedIn</a></div></div></div></div><nav class="content__nav"><div class="content__nav__prev"><a class="content__nav__link" href="https://www.sahebansari.com/implementing-key-based-and-basic-authentication-in-the-same-project.html" rel="prev">Previous Post<h3 class="h6">Implementing Key-Based and Basic Authentication in the same ASP.NET Core 9 Project</h3></a></div></nav></footer></div></article></div><div class="content__related"><div class="wrapper"><h2 class="h5">Related posts</h2><div class="l-grid l-grid--4"><article class="c-card"><a href="https://www.sahebansari.com/implementing-key-based-and-basic-authentication-in-the-same-project.html" class="c-card__image"><img src="https://www.sahebansari.com/media/posts/13/auth.png" srcset="https://www.sahebansari.com/media/posts/13/responsive/auth-xs.png 300w, https://www.sahebansari.com/media/posts/13/responsive/auth-sm.png 480w, https://www.sahebansari.com/media/posts/13/responsive/auth-md.png 768w, https://www.sahebansari.com/media/posts/13/responsive/auth-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="400" width="1200" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://www.sahebansari.com/tags/aspnet/">ASP.NET</a></div><h3 class="c-card__title"><a href="https://www.sahebansari.com/implementing-key-based-and-basic-authentication-in-the-same-project.html" class="invert">Implementing Key-Based and Basic Authentication in the same ASP.NET Core 9 Project</a></h3></header><footer class="c-card__meta"><time datetime="2024-12-07T18:18">December 7, 2024</time></footer></div></article><article class="c-card"><a href="https://www.sahebansari.com/minimal-api-in-aspnet-core-deep-dive-with-benefits-and-comparisons.html" class="c-card__image"><img src="https://www.sahebansari.com/media/posts/11/web-api.png" srcset="https://www.sahebansari.com/media/posts/11/responsive/web-api-xs.png 300w, https://www.sahebansari.com/media/posts/11/responsive/web-api-sm.png 480w, https://www.sahebansari.com/media/posts/11/responsive/web-api-md.png 768w, https://www.sahebansari.com/media/posts/11/responsive/web-api-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="407" width="1200" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://www.sahebansari.com/tags/aspnet/">ASP.NET</a></div><h3 class="c-card__title"><a href="https://www.sahebansari.com/minimal-api-in-aspnet-core-deep-dive-with-benefits-and-comparisons.html" class="invert">Minimal API in ASP.NET Core 9: A Deep Dive with Benefits and Comparisons</a></h3></header><footer class="c-card__meta"><time datetime="2024-11-30T21:42">November 30, 2024</time></footer></div></article><article class="c-card"><a href="https://www.sahebansari.com/exploring-the-unique-features-of-aspnet-core-9.html" class="c-card__image"><img src="https://www.sahebansari.com/media/posts/10/aspnet9.jpg" srcset="https://www.sahebansari.com/media/posts/10/responsive/aspnet9-xs.jpg 300w, https://www.sahebansari.com/media/posts/10/responsive/aspnet9-sm.jpg 480w, https://www.sahebansari.com/media/posts/10/responsive/aspnet9-md.jpg 768w, https://www.sahebansari.com/media/posts/10/responsive/aspnet9-lg.jpg 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="495" width="1279" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://www.sahebansari.com/tags/aspnet/">ASP.NET</a></div><h3 class="c-card__title"><a href="https://www.sahebansari.com/exploring-the-unique-features-of-aspnet-core-9.html" class="invert">Exploring the Unique Features of ASP.NET Core 9: A Comprehensive Guide with Examples</a></h3></header><footer class="c-card__meta"><time datetime="2024-11-30T20:11">November 30, 2024</time></footer></div></article></div></div></div></main><footer class="footer"><div class="footer__copyright"><div class="wrapper"><div style="display: grid; grid-template-columns: 20% auto;"><div><img alt="logo" src="/logo-transparent.svg" style="height:150px"></div><div><a href="/index.html" title="Home page" target="_self">Home</a> &dot; <a href="/tags/posts/index.html" title="Latest Posts page" target="_self">Posts</a> &dot; <a href="/contact.html" title="Contact page" target="_self">Contact Us</a> &dot; <a href="/copyright-policy.html" title="Copyright Policy page" target="_self">Copyright</a> &dot; <a href="/privacy-policy.html" title="Privacy Policy page" target="_self">Privacy</a><br><br>Copyright © 2024, Saheb Ansari. All rights reserved.<br><br><p style="font-size:13px">Any logos or company names mentioned here are used solely for reference purposes and may be the trademarks or property of their respective owners.</p></div><div>.</div><div class="footer__social"><a href="https://www.facebook.com/sahebansari" aria-label="Facebook" class="facebook"><svg viewBox="0 0 32 32"><path d="M32,16.1A16,16,0,1,0,13.5,32V20.75H9.44V16.1H13.5V12.55c0-4,2.39-6.26,6-6.26a24.77,24.77,0,0,1,3.58.31v4h-2a2.33,2.33,0,0,0-2.61,2.52v3h4.44l-.71,4.65H18.5V32A16.07,16.07,0,0,0,32,16.1Z"></path></svg> </a><a href="https://www.x.com/sahebansari" aria-label="Twitter" class="twitter"><svg viewBox="0 0 24 24"><path d="m14.093,10.315L22.283,1h-1.941l-7.111,8.089L7.551,1H1l8.589,12.231L1,23h1.941l7.51-8.542,5.998,8.542h6.551l-8.907-12.685h0Zm-2.658,3.024l-.87-1.218L3.64,2.43h2.981l5.588,7.821.87,1.218,7.264,10.166h-2.981l-5.927-8.296h0Z"></path></svg> </a><a href="https://www.linkedin.com/in/sahebansari/" aria-label="LinkedIn" class="linkedin"><svg viewBox="0 0 34.48 32"><path d="M29.632,0H2.362A2.336,2.336,0,0,0,0,2.306V29.691A2.337,2.337,0,0,0,2.362,32h27.27A2.342,2.342,0,0,0,32,29.691V2.306A2.34,2.34,0,0,0,29.632,0ZM9.491,27.268H4.744V12H9.491ZM7.119,9.909a2.752,2.752,0,1,1,2.75-2.753A2.753,2.753,0,0,1,7.119,9.909ZM27.268,27.268H22.525V19.842c0-1.772-.033-4.05-2.466-4.05-2.47,0-2.848,1.929-2.848,3.921v7.555H12.468V12h4.553v2.086h.063a4.986,4.986,0,0,1,4.491-2.467c4.806,0,5.694,3.163,5.694,7.275Z"></path></svg> </a><a href="https://www.youtube.com/@sahebansari" aria-label="Youtube" class="youtube"><svg viewBox="0 0 32 22.507"><path d="M31.68,9.6a6.924,6.924,0,0,0-1.272-3.176A4.577,4.577,0,0,0,27.2,5.07c-4.478-.324-11.2-0.324-11.2-0.324H15.993s-6.717,0-11.2.324A4.577,4.577,0,0,0,1.592,6.426,6.921,6.921,0,0,0,.32,9.6,48.4,48.4,0,0,0,0,14.781v2.428a48.4,48.4,0,0,0,.32,5.179,6.921,6.921,0,0,0,1.272,3.176A5.426,5.426,0,0,0,5.12,26.932C7.68,27.177,16,27.253,16,27.253s6.724-.01,11.2-0.334a4.577,4.577,0,0,0,3.206-1.355,6.923,6.923,0,0,0,1.272-3.176A48.46,48.46,0,0,0,32,17.209V14.781A48.46,48.46,0,0,0,31.68,9.6ZM12.7,20.151l0-8.991,8.647,4.511Z" transform="translate(0 -4.747)"></path></svg></a></div></div></div></div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://www.sahebansari.com/assets/js/scripts.min.js?v=1b09dc64eb6086ddc9720890661ff038"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script><script defer="defer" src="https://www.sahebansari.com/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://www.sahebansari.com/media/plugins/syntaxHighlighter/prism-line-numbers.min.js"></script><script defer="defer" src="https://www.sahebansari.com/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://www.sahebansari.com/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script><script src="https://www.sahebansari.com/media/plugins/docSearch/docsearch.min.js"></script><script type="text/javascript">docsearch({
				container: '#docsearch',
				appId: 'KZS745RKYF',
				indexName: 'sahebansari',
				apiKey: '274a7e12d5f9c9954f5343426ef85498',
				debug: false
			});</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="https://www.sahebansari.com/privacy-policy.html">Privacy Policy</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. <a href="https://www.sahebansari.com/privacy-policy.html">Privacy Policy</a></div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Required</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="G1234" id="G1234-cookies"> <label for="G1234-cookies">Required</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>window.dataLayer = window.dataLayer || [];
                function gtag() { dataLayer.push(arguments); }

                window.publiiCBGCM = {
                    defaultState: {"ad_storage":true,"ad_personalization":true,"ad_user_data":true,"analytics_storage":false,"personalization_storage":true,"functionality_storage":true,"security_storage":true},
                    groups: []
                };
            
            (function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && cbConfig.initialLsState.indexOf(allowedGroup) === -1) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>